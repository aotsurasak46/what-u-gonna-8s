@{
    ViewData["Title"] = "Home Page";
}
@using what_u_gonna_eat.ViewModels;
@model DeliverPostView
<link rel="stylesheet" href="~/css/DeliverPost.css" />
<div class="text-center">
    
    <form method="POST" asp-controller="DeliverPost" asp-action="Create" id="create-form">
        <select asp-for="deliverPost.Restaurant" class="form-select form-select-sm" aria-label=".form-select-sm example">
            <option selected>Select Restaurant</option>
            <option value="Pratep">Pratep</option>
            <option value="Sia O">Sia O</option>
            <option value="T PangGon">T PangGon</option>
            <option value="To be number wannnn">To be number wannnn</option>
        </select>
        
        <div class="form-group">
            <label>Description : </label>
            <input placeholder="กรอกรายละเอียดการรับอาหาร หรือข้อมูลเพิ่มเติม" asp-for="deliverPost.Description" class="form-control" required=""/>
        </div>

        <button id="createbtn" type="submit" asp-area="" asp-controller="DeliverPost" asp-action="Create" class="btn btn-primary my-2">Create</button>
    </form>
</div>

@if (Model.deliverPosts != null)
{
    <div class="grid grid-cols-1 gap-16 m-3 pt-6 min[:grid-cols-2 lg:grid-cols-3 lg:px-10">
        @foreach (var post in Model.deliverPosts)
        {
            <div class="flex flex-col card-p">

                <div class="header yellow-div p-2 items-center">
                    <div class="grid grid-cols-10 h-full mx-2 py-2.5">
                        <div class="flex col-span-2 items-center justify-center">
                            <img class="w-16" style="border-radius: 50%;" src="https://cdn.discordapp.com/attachments/975683623804100679/1071003865773785129/A_doggie.webp" alt="Rounded avatar">
                        </div>
                        <div class="flex col-span-8 items-center justify-center">
                            <p class="text-center text-xl dark-blue md:text-lg lg:text-2xl">@post.Poster?.Username</p>
                        </div>
                    </div>
                </div>

                <div class="flex flex-row items-center h-full my-3 mx-4 divide-x-2 lg:mx-5">
                    <div class="basis-3/5 h-full space-y-2.5 mr-4">
                        <p class="yellow">Restaurant :</p>
                        <div>
                            <span class="px-3 py-0.5 text-xs border-2 border-black rounded-full md:text-sm thai">@post.Restaurant</span>
                        </div>
                        <p class="yellow">Description :</p>
                        <textarea id="style-2" rows="4" class="resize-none disable-scroll thai text-ms md:text-sm block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border-black border-2 "
                          disabled>@post.Description
                        </textarea>
                        <div class="bottom-0 left-0 text-sm  md:text-base"><p>@post.CreatedDate</p></div>
                    </div>

                    @if (post.Status == true && post.PosterId != Model.account.Id)
                    {
                        <div class="flex basis-2/5 justify-center items-center h-full" style="border-color: #fdbf46;">
                            <form asp-action="OrderSubmit" asp-controller="EaterPost" method="post" asp-route-postId="@post.Id">
                                <button id="buttonwhenenable" type="submit" style="height:100px"><span class="iconify" data-icon="material-symbols:add-circle-rounded" style="color: #fdbf46;" data-width="100" data-height="100"></span></button>
                            </form>
                        </div>
                    }
                    else
                    {
                        <div class="flex basis-2/5 justify-center items-center h-full" style="border-color: #fdbf46;">

                            <button id="buttonwhendisable" type="submit" style="height:100px;cursor:default"><span class="iconify" data-icon="material-symbols:add-circle-outline-rounded" style="color: #FDBF46;" data-width="100" data-height="100"></span></button>

                        </div>
                    }

                </div>
            </div>



            @*<div>
                
                @if (post.Status == true && post.PosterId != Model.account.Id)
                {
                    <form method="post" asp-action="AddOrder" asp-controller="DeliverPost" asp-route-postId="@post.Id">
                        <input placeholder="menu" name="foodName" class="form-control" required="">
                        <input placeholder="description" name="description" class="form-control" required="">
                        <button type="submit">Order</button>
                    </form>
                }
            </div>*@

        }
       
    </div>
}
<script>
    var createForm = document.getElementById("create-form");

    // Add an onsubmit event listener to the form
    createForm.addEventListener("submit", function (event) {
        // Get the values of the form inputs
        var restaurant = document.getElementById("deliverPost_Restaurant").value;
        var description = document.getElementById("deliverPost_Description").value;

        // Display the confirmation dialog with the form values
        var confirmCreate = confirm("Are you sure you want to create this post?\nDetail:\n\tRestaurant: " + restaurant + "\n\tDescription: " + description);

        // If the user clicked "Cancel", prevent the form submission
        if (!confirmCreate) {
            event.preventDefault();
        }
    });
</script>

